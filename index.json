[{"categories":["OS"],"content":"操作系统实验环境配置 操作系统实验中，利用qemu运行RISCV架构下的操作系统，gdb远程调试。利用vscode给gdb提供图形界面的支持可以极大的改善调试体验。 ","date":"2020-10-17","objectID":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:0:0","tags":["Lab"],"title":"内核调试环境配置","uri":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"categories":["OS"],"content":"1 安装Native Debug插件 ","date":"2020-10-17","objectID":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:1:0","tags":["Lab"],"title":"内核调试环境配置","uri":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"categories":["OS"],"content":"2 配置Lauch.json { \"version\": \"0.2.0\", \"configurations\": [ { \"type\": \"gdb\", \"request\": \"attach\", \"name\": \"Attach to QEMU\", //替换为自己的可执行文件路径 \"executable\": \"${workspaceFolder}/prj2/main\", //将端口替换为当前实验中qemu打开的端口，例如xv6习惯于使用26000 \"target\": \"localhost:1234\", \"remote\": true, \"cwd\": \"${workspaceRoot}\", //替换为相应的gdb可执行文件的地址 \"gdbpath\": \"/riscv64-linux/bin/riscv64-unknown-linux-gnu-gdb\", \"autorun\": [ //添加其他需要的文件提供调试信息 \"add-symbol-file ${workspaceFolder}/prj2/bootblock\", //在入口函数下断点 \"b _start\" ] }, ] } ","date":"2020-10-17","objectID":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:2:0","tags":["Lab"],"title":"内核调试环境配置","uri":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"},{"categories":["OS"],"content":"2.1 愉快调试 在终端中启动qemu后，F5打开调试器，程序将自动停止在设定的断点处。 Tips: 使用侧边栏调试窗口中的Call Stack查看调用栈 Debug Console中照常使用gdb打印信息 在.gdbinit中自定义宏，打印信息,例如: define plist set $hd = (list_node_t*)\u0026ready_queue set $nd = ready_queue-\u003enext while($nd != $hd) p/x $nd set $nd = ((list_node_t*)$nd)-\u003enext end end define pcur printf \"current_running-\u003ekernel_sp= %lx\",current_running-\u003ekernel_sp printf \"current_running-\u003euser_sp= %lx\",current_running-\u003euser_sp printf \"context:\\n\" x/36gx current_running-\u003ekernel_sp end 示例： 祝大家调试愉快。 ","date":"2020-10-17","objectID":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/:2:1","tags":["Lab"],"title":"内核调试环境配置","uri":"/%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"}]